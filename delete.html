<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>delete_page</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<h1>Employee Payroll System</h1><br><br><br>
<form id="deleteForm" action="delete_process.jsp" method="post">
    <h2>Delete Record</h2>
    <h3>Employee Id</h3>
    <input type="text" id="empid" name="empid" value="">
    <span class="error" id="empidError"></span><br><br>
    <input id="b2" type="submit" name="submit" value="Submit"></input><br><br><br>
    <a href="index.html">HOME PAGE</a>
</form>

<!-- Custom Confirmation Dialog -->
<div id="overlay"></div>
<div id="confirmDialog">
    <div class="warning-icon">⚠️</div>
    <h3>Confirm Deletion</h3>
    <p>Are you sure you want to delete Employee ID: <strong><span id="deleteEmpId"></span></strong>?</p>
    <p style="color: #f44336;">This action cannot be undone!</p>
    <div class="dialog-buttons">
        <button type="button" id="confirmYes">Yes, Delete</button>
        <button type="button" id="confirmNo">Cancel</button>
    </div>
</div>

<script>
$(document).ready(function() {
    var formData = null;
    
    // Form submit handler
    $('#deleteForm').submit(function(e) {
        e.preventDefault(); // Always prevent default first
        
        var isValid = true;
        $('#empidError').text('');
        
        // Validate Employee ID
        var empid = $('#empid').val().trim();
        if (empid === '') {
            $('#empidError').text('Employee ID is required');
            isValid = false;
            return false;
        } else if (!/^\d+$/.test(empid)) {
            $('#empidError').text('Employee ID must be numeric');
            isValid = false;
            return false;
        }
        
        if (isValid) {
            // Show custom confirmation dialog
            $('#deleteEmpId').text(empid);
            $('#overlay').fadeIn(300);
            $('#confirmDialog').fadeIn(300);
        }
        
        return false; // Prevent form submission
    });
    
    // Confirm deletion
    $('#confirmYes').click(function() {
        // Submit the form
        $('#deleteForm').off('submit').submit();
    });
    
    // Cancel deletion
    $('#confirmNo').click(function() {
        $('#overlay').fadeOut(300);
        $('#confirmDialog').fadeOut(300);
    });
    
    // Real-time validation
    $('#empid').on('input', function() {
        var empid = $(this).val().trim();
        if (empid !== '' && !/^\d+$/.test(empid)) {
            $('#empidError').text('Employee ID must be numeric');
        } else {
            $('#empidError').text('');
        }
    });
    
    // Fade in animation
    $('form').hide().fadeIn(800);
});
</script>
</body>
</html>