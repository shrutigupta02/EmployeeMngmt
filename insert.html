<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert_page</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<h1>Employee Payroll System</h1><br><br><br>
<h2>Insert Record</h2>
<form id="insertForm" action="insert_process.jsp" method="post">
<h3>Employee ID</h3><br>
<input type="text" id="empid" name="empid" value="">
<span class="error" id="empidError"></span>

<h3>Employee Name</h3><br>
<input type="text" id="empname" name="empname" value="">
<span class="error" id="empnameError"></span>

<h3>Employee City</h3><br>
<input type="text" id="empcity" name="empcity" value="">
<span class="error" id="empcityError"></span>

<h3>Employee Department</h3><br>
<input type="text" id="empdep" name="empdep" value="">
<span class="error" id="empdepError"></span>

<h3>Employee Salary</h3><br>
<input type="text" id="empsal" name="empsal" value="">
<span class="error" id="empsalError"></span><br><br>

<div id="loadingSpinner">Processing...</div>
<input id="b1" type="submit" name="submit" value="Insert"></input>
<input id="resetBtn" type="button" value="Clear Form"></input><br><br><br>
<a href="index.html">HOME PAGE</a>
</form>

<script>
$(document).ready(function() {
    // Form validation on submit
    $('#insertForm').submit(function(e) {
        var isValid = true;
        $('.error').text(''); // Clear previous errors
        
        // Validate Employee ID
        var empid = $('#empid').val().trim();
        if (empid === '') {
            $('#empidError').text('Employee ID is required');
            isValid = false;
        } else if (!/^\d+$/.test(empid)) {
            $('#empidError').text('Employee ID must be numeric');
            isValid = false;
        }
        
        // Validate Employee Name
        var empname = $('#empname').val().trim();
        if (empname === '') {
            $('#empnameError').text('Employee Name is required');
            isValid = false;
        } else if (!/^[a-zA-Z\s]+$/.test(empname)) {
            $('#empnameError').text('Name must contain only letters');
            isValid = false;
        }
        
        // Validate City
        var empcity = $('#empcity').val().trim();
        if (empcity === '') {
            $('#empcityError').text('City is required');
            isValid = false;
        }
        
        // Validate Department
        var empdep = $('#empdep').val().trim();
        if (empdep === '') {
            $('#empdepError').text('Department is required');
            isValid = false;
        }
        
        // Validate Salary
        var empsal = $('#empsal').val().trim();
        if (empsal === '') {
            $('#empsalError').text('Salary is required');
            isValid = false;
        } else if (!/^\d+(\.\d{1,2})?$/.test(empsal)) {
            $('#empsalError').text('Invalid salary format');
            isValid = false;
        }
        
        if (!isValid) {
            e.preventDefault();
            return false;
        }
        
        // Show loading spinner
        $('#loadingSpinner').show();
    });
    
    // Real-time validation
    $('#empid').blur(function() {
        var empid = $(this).val().trim();
        if (empid !== '' && !/^\d+$/.test(empid)) {
            $('#empidError').text('Employee ID must be numeric');
        } else {
            $('#empidError').text('');
        }
    });
    
    $('#empsal').blur(function() {
        var empsal = $(this).val().trim();
        if (empsal !== '' && !/^\d+(\.\d{1,2})?$/.test(empsal)) {
            $('#empsalError').text('Invalid salary format');
        } else {
            $('#empsalError').text('');
        }
    });
    
    // Clear form button
    $('#resetBtn').click(function() {
        $('#insertForm')[0].reset();
        $('.error').text('');
    });
    
    // Fade in animation
    $('form').hide().fadeIn(800);
});
</script>
</body>
</html>